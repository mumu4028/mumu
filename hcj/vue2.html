<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue2组件间通讯 | mumu博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="超级通俗的个人博客">
    
    <link rel="preload" href="/mumu/assets/css/0.styles.5ae3cfb4.css" as="style"><link rel="preload" href="/mumu/assets/js/app.a038ac06.js" as="script"><link rel="preload" href="/mumu/assets/js/2.f7777874.js" as="script"><link rel="preload" href="/mumu/assets/js/11.b57a3410.js" as="script"><link rel="prefetch" href="/mumu/assets/js/10.aaddcacd.js"><link rel="prefetch" href="/mumu/assets/js/12.e5fe2a35.js"><link rel="prefetch" href="/mumu/assets/js/13.1beae005.js"><link rel="prefetch" href="/mumu/assets/js/3.82c2c001.js"><link rel="prefetch" href="/mumu/assets/js/4.e5362eb3.js"><link rel="prefetch" href="/mumu/assets/js/5.4e04916d.js"><link rel="prefetch" href="/mumu/assets/js/6.91b60684.js"><link rel="prefetch" href="/mumu/assets/js/7.467cbd0c.js"><link rel="prefetch" href="/mumu/assets/js/8.1f330007.js"><link rel="prefetch" href="/mumu/assets/js/9.e310ed13.js">
    <link rel="stylesheet" href="/mumu/assets/css/0.styles.5ae3cfb4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mumu/" class="home-link router-link-active"><!----> <span class="site-name">mumu博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mumu/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/mumu/hcj/html.html" class="nav-link">
  三剑客
</a></div><div class="nav-item"><a href="/mumu/tips/vscode.html" class="nav-link">
  技巧
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mumu/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/mumu/hcj/html.html" class="nav-link">
  三剑客
</a></div><div class="nav-item"><a href="/mumu/tips/vscode.html" class="nav-link">
  技巧
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/mumu/hcj/html.html" class="sidebar-link">html</a></li><li><a href="/mumu/hcj/css.html" class="sidebar-link">css</a></li><li><a href="/mumu/hcj/js01.html" class="sidebar-link">javascript</a></li><li><a href="/mumu/hcj/vue2.html" aria-current="page" class="active sidebar-link">vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mumu/hcj/vue2.html#vue2组件间通讯" class="sidebar-link">vue2组件间通讯</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="vue2组件间通讯"><a href="#vue2组件间通讯" class="header-anchor">#</a> vue2组件间通讯</h2> <h3 id="_1、准备工作"><a href="#_1、准备工作" class="header-anchor">#</a> 1、准备工作</h3> <p>​	1、把定义好的communication组件注册到我们的前台项目当中</p> <p>​	2、修改路由配置</p> <p>​	3、注册element-ui的button组件</p> <h3 id="_2、组件间通信props-一"><a href="#_2、组件间通信props-一" class="header-anchor">#</a> 2、组件间通信props(一)</h3> <p>​	props   子组件声明接收属性三种写法  数组： [‘todos’]  对象：{ todos:Array}  对象的复杂写法：{ todos:{type:Array,default:[]}}</p> <p>​	组件之间的通信方式</p> <p>​	父子之间</p> <p>​	父可以给子传递 非函数和函数</p> <p>​	传非函数数据 就是父向子</p> <p>​	传函数数据  本质是父想要子的数据，子向父</p> <p>​	特殊：</p> <p>​		路由配置 props（三种）  路由组件之间没有标签，但是可以把参数通过路由映射为属性
​		1、布尔值  true  把路径params参数映射为要显示的组件内属性</p> <p>​		2、对象  {name:'赵丽颖'}  只能映射传递额外的静态的数据 一般不用</p> <p>​		3、函数	 props:(route) =&gt;{}  自己手动映射params参数和query参数 成为要显示的组件内属性</p> <p>​</p> <p>​		如果不用props，那么组件内要用数据必须要写成 this.$route.params.xxx  this.$route.query.xxx</p> <h3 id="_3、组件间通信自定义事件-二"><a href="#_3、组件间通信自定义事件-二" class="header-anchor">#</a> 3、组件间通信自定义事件（二）</h3> <h5 id="自定义事件"><a href="#自定义事件" class="header-anchor">#</a> 自定义事件</h5> <p>​		组件通信的一种方式</p> <p>​	适用场合：</p> <p>​		子向父传递数据</p> <p>​	怎么做</p> <p>​		在父组件当中给子组件标签绑定自定义事件，事件回调留在父组件当中</p> <p>​		在子组件当中触发它自己身上绑定的自定义事件，触发事件调用回调函数可以通过实参传递</p> <p>​	原生dom事件</p> <p>​		事件类型  回调函数  谁调用  默认传递的实参是什么</p> <p>​		1、事件类型    固定的几个</p> <p>​		2、回调函数    自己去定义的</p> <p>​		3、触发（分发、触发事件）了谁调用  系统调用  浏览器去调用</p> <p>​		4、event事件对象  （浏览器在调用回调函数的时候，会把当前这一次触发事件相关的所有信息封装成一个对象</p> <p>​		传递给回调函数的第一个形参）</p> <p>​		box.onclick = function(event){</p> <p>​		}</p> <h5 id="自定义事件-2"><a href="#自定义事件-2" class="header-anchor">#</a> 自定义事件</h5> <p>​		事件类型  回调函数  谁调用  默认传递的是什么</p> <p>​		1、事件类型       无数个</p> <p>​		2、回调函数       自己去定义的</p> <p>​		3、谁调用        自己去调用  自己使用$emit触发调用的</p> <p>​		4、默认传递的是什么   默认传递的是自己给的参数 （有就有，没有就没有undefined）</p> <p>​</p> <p>​		this.$emit('haha',10)</p> <p>​	原生dom事件在html标签和组件标签上的区别  （Event1组件测试）</p> <p>​		在html标签上添加就是原生的dom事件</p> <p>​		在组件标签上添加就是自定义事件，想成为原生的事件得添加修饰符.native,就是把原生dom事件添加到组件根元素上	(事件委派了)</p> <p>​	vue自定义的事件在html标签和组件标签上的区别 （Event2组件测试）</p> <p>​		在html标签上添加自定义事件无意义，所以自定义事件是给组件标签添加的</p> <p>​		添加给组件标签：事件名可以任意，也可以和原生的dom事件名相同，但是在组件标签身上即使添加原生dom事件也是自定义的</p> <p>​</p> <h3 id="_4、全局事件总线-三"><a href="#_4、全局事件总线-三" class="header-anchor">#</a> 4、全局事件总线（三）</h3> <p>​	组件之间通信的一种方式</p> <p>​</p> <p>​	所有场合（所有组件之通信）</p> <p>​	全局事件总线的角色标准</p> <p>​	本质是一个对象，这个对象有两个要求：</p> <p>​	1、所有的组件对象都可以看到它</p> <p>​	2、可以使用$on和$emit方法</p> <p>​</p> <p>​	怎么添加事件总线</p> <p>​	1、安装总线（越早越好，一本我们在beforeCreate时就安装）</p> <p>​	2、在接收数据的组件对象当中  获取总线给总线绑定自定义事件  this.$bus.$on</p> <p>​	3、在发送数据的组件对象当中  获取总线触发总线身上绑定的自定义事件  this.$bus.$emit</p> <p>​</p> <h3 id="_5、v-model-深入-四"><a href="#_5、v-model-深入-四" class="header-anchor">#</a> 5、v-model 深入（四）</h3> <p>​	element-ui表单相关项都使用到了v-model</p> <p>​	官方网站也提出了怎么去使用</p> <p>​</p> <p>​	1、html input v-model的本质</p> <p>​		:value = “data”  //读取数据</p> <p>​		@input = &quot;data = $event.target.value&quot;  //写数据</p> <p>​</p> <p>​	2、组件标签上 v-model本质</p> <p>​		:value = &quot;data&quot;  父组件传递属性给子组件，子组件需要接受</p> <p>​		@input = &quot;data = $event&quot; //父组件当中给子组件添加的自定义事件</p> <p>​		数据在父组件当中</p> <p>​</p> <p>​		子组件当中必须这样写</p> <p>​		先接受props:['value']</p> <p>​</p> <p>​		子组件表单类元素</p> <p>​</p> <div class="language- extra-class"><pre class="language-text"><code>	：value = &quot;value&quot;

​	@input = &quot;$emit('input',$event.target.value)&quot;
</code></pre></div><p>​</p> <p>​	干了两件事</p> <p>​		先显示数据</p> <p>​		再绑定修改数据的事件</p> <p>​		只不过在html和组件标签上绑定的@input事件不同  一个是原生的 一个是自定义的事件</p> <p>​	实现父子组件双向数据同步问题</p> <p>​	1、把父组件的数据，通过props传递给子组件；</p> <p>​	2、子组件声明接收属性，就可以读取value值进行使用；</p> <p>​	3、父组件给子组件绑定input事件，事件触发后，父组件把接收到子组件修改的数据，拿到修改自己的数据；</p> <p>​	4、子组件内部，在适当的时候，触发自定义事件，传递数据</p> <p>​	5、父组件数据变化，value会重新传递给子组件，子组件跟着修改</p> <p>​	源码查看element-ui的input是不是使用了</p> <p>​	本质上还是自定义事件和props组合</p> <p>​</p> <h3 id="_6、sync-属性修饰符-五"><a href="#_6、sync-属性修饰符-五" class="header-anchor">#</a> 6、sync 属性修饰符（五）</h3> <p>​</p> <p>​	实现父子组件双向数据同步问题</p> <p>​	和 v-model 实现效果几乎一样</p> <p>​	区别：约定成俗：</p> <p>​	v-model一般用于带表单项的组件</p> <p>​	sync属性修饰符一般用于不带表单项的组件</p> <p>​</p> <p>​	父组件给子组件属性传递数据后面添加.sync</p> <p>​	子组件修改数据 需要分发事件@click = $emit(&quot;update:属性名&quot;,要更新的数据)</p> <p>​	本质上还是自定义事件和props组合</p> <p>​	子组件内部不能直接修改父组件传递过来的数据，否则警告</p> <p>​	如果可以修改数据，无法知道是谁修改的</p> <h3 id="_7、-attrs和-linsteners-六"><a href="#_7、-attrs和-linsteners-六" class="header-anchor">#</a> 7、$attrs和$linsteners（六）</h3> <p>​	本质就是父组件中给 子组件传递的所有属性组成的对象及自定义事件方法组成的对象</p> <p>​	$attrs 如果不声明props 那么子组件当中是可以看到  如果声明了哪个属性，那么那个属性在$attrs当中看不到</p> <p>​	它会排除 props声明接收的属性 以及class style</p> <p>​	可以通过v-bind 一次性把父组件传递过来的属性添加给子组件</p> <p>​	可以通过v-on  一次性把父组件传递过来的事件监听添加给子组件</p> <p>​	对一个组件进行二次封装</p> <p>8、element-ui的button添加click事件会触发，添加dblclick就不会触发的问题</p> <p>​</p> <p>​	element-ui的button  子组件内部触发了这个单击事件</p> <p>​	element-ui的button  子组件内部没有触发这个双击事件</p> <p>​	扩展双击点击触发element-ui button事件，使用原生.native</p> <h3 id="_9、-parent-和-children以及-ref-七"><a href="#_9、-parent-和-children以及-ref-七" class="header-anchor">#</a> 9、$parent 和 $children以及$ref（七）</h3> <p>​	$children：所有子组件对象的数组</p> <p>​	$parent：代表父组件对象</p> <p>​	父组件当中可以通过$children找到所有的子组件去操作子组件的数据（当然可以找孙子组件）</p> <p>​	子组件当中可以通过$parent找到父组件（当然可以继续找爷爷组件）操作父组件的数据</p> <p>​	$parent 和 $children用的时候注意</p> <h3 id="_10、扩展-多个组件有部分相同的js代码"><a href="#_10、扩展-多个组件有部分相同的js代码" class="header-anchor">#</a> 10、扩展： 多个组件有部分相同的js代码</h3> <p>​	html js  css 相同   封装组件</p> <p>​	单个组件js代码重复   封装函数</p> <p>​	不同的组件js代码重复  封装模块 （混入）</p> <p>​	实现组件之间js代码的复用  利用vue的mixin技术  参考官网</p> <p>​	比如多个组件的methods里面很多函数都是重复的 那么我们可以定义单独的模块去把这些相同的代码定义到外部</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">export</span> <span class="token keyword">const</span> xxxMixin <span class="token operator">=</span> <span class="token punctuation">{</span>

​		methods<span class="token operator">:</span><span class="token punctuation">{</span>

​			重复的代码写在这
​		<span class="token punctuation">}</span>
​	<span class="token punctuation">}</span>

</code></pre></div><h3 id="_11、作用域插槽-八"><a href="#_11、作用域插槽-八" class="header-anchor">#</a> 11、作用域插槽（八）</h3> <p>​	适用：父子之间</p> <p>​	数据是在父组件当中的，数据是要给子组件去展示的（vfor）</p> <p>​	展示的过程当中，数据的结构 子组件说了不算，是由父组件决定的</p> <p>​	父组件要把需要子组件展示的数据传递给子组件</p> <p>​	子组件在展示的过程当中，需要改变结构的数据传回给父组件</p> <p>​	父组件再把结果和数据一并传回给子组件</p> <h3 id="_12、vuex-九"><a href="#_12、vuex-九" class="header-anchor">#</a> 12、vuex（九）</h3> <p>​</p> <p>​	组件之间通讯方式（也是共享状态管理）</p> <p>​	4个核心概念</p> <p>​	state 	存放数据</p> <p>​	mutations		直接修改数据</p> <p>​	actions	对象，存放的也是方法，两个作用，1、其实是vue和vuex的桥梁 2、提交mutation修改state数据</p> <p>​	getters</p> <p>​	modules //vuex的模块化开发</p> <p>​	主要针对state</p> <p>​	namespace //命名空间</p> <p>​	什么时候用vuex？</p> <p>​	项目复杂的时候，使用vuex，</p> <h3 id="_13、消息的订阅和发布-pubsubjs-十-代码参考基友-说法参考全局事件总线"><a href="#_13、消息的订阅和发布-pubsubjs-十-代码参考基友-说法参考全局事件总线" class="header-anchor">#</a> 13、消息的订阅和发布  PubSubJS (十)  代码参考基友   说法参考全局事件总线</h3> <p>​</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mumu/hcj/js01.html" class="prev">
        javascript
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/mumu/assets/js/app.a038ac06.js" defer></script><script src="/mumu/assets/js/2.f7777874.js" defer></script><script src="/mumu/assets/js/11.b57a3410.js" defer></script>
  </body>
</html>
